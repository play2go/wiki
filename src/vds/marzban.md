---
order: 11
authors:
  - s3nkwr
---

# Установка и настройка Marzban

## Что это? {#what}

[Marzban](https://gozargah.github.io/marzban/ru/) - это инструмент управления прокси-серверами с интерфейсом для управления пользователями. Также у него есть поддержка Telegram ботов для управления пользователями.

## Как его установить? {#setup}

1. Введите команду: `sudo bash -c "$(curl -sL https://github.com/Gozargah/Marzban-scripts/raw/master/marzban.sh)" @ install`
2. После вы увидите логи, которые можно убрать, нажав Ctrl+C.
3. Для входа в панель создайте аккаунт администратора: `marzban cli admin create --sudo`
4. Для вывода всех команд в Marzban напишите: `marzban --help`
5. Приступите к [следующему шагу](#web).

:::info :exclamation: Информация
- Файлы Marzban будут размещены по адресу `/opt/marzban`. 
- Файл конфигурации будет размещен по адресу `/opt/marzban/.env`. 
- Файлы с данными будут размещены по адресу `/var/lib/marzban`.
:::

## Как попасть в саму панель? {#web}

По соображениям безопасности, панель управления Marzban недоступна через IP-адрес. Есть два способа:
1. Сделать перенаправление порта через SSH.
2. Вам нужно получить SSL и купить домен, если у вас его нет.

### Для первого способа вам нужно:
1. Сделать перенаправление порта: `ssh -L 8000:localhost:8000 user@serverip`. \
   Для других SSH-клиентов: [SSH-туннелирование](/vds/sshtunnel) 
2. После можно будет попасть в панель через http://localhost:8000/dashboard/

:::warning :warning: Внимание!
Учтите что доступ закроется, как только вы закроете SSH-клиент. Поэтому используйте данный способ только для тестирования.
:::

### Для второго способа нужно сделать данные шаги:
1. Установить Socat: `apt install curl socat -y`
2. Установить acme.sh, предварительно заменив `YOUR_EMAIL` на вашу почту: \
   `curl https://get.acme.sh | sh -s email=YOUR_EMAIL`
3. После установки нужных программ, исполняем данную программу, не забыв заменить `YOUR_DOMAIN` на ваш домен:
```bash
export DOMAIN=YOUR_DOMAIN

mkdir -p /var/lib/marzban/certs

~/.acme.sh/acme.sh \
--issue --force --standalone -d "$DOMAIN" \
--fullchain-file "/var/lib/marzban/certs/$DOMAIN.cer" \
--key-file "/var/lib/marzban/certs/$DOMAIN.cer.key"
```
4. После можно будет попасть в панель через https://ваш-домен:8000/dashboard/

## Как установить Telegram бота? {#telegram}

Marzban включает встроенного бота Telegram, который позволяет управлять сервером, создавать и удалять пользователей, а также отправлять уведомления. Включить этого бота можно легко, следуя нескольким простым шагам:

1. Вам нужно создать своего бота в [@botfather](https://t.me/botfather). Далее следуйте простым шагам для создания бота.
2. После создания бота вам выдадут API-токена бота. Установите его в параметр `TELEGRAM_API_TOKEN` файла конфигурации.
3. Чтобы бот знал кто администратор, нужно узнать ваш айди аккаунта Telegram в боте [@userinfobot](https://t.me/userinfobot). Установите его в параметр `TELEGRAM_ADMIN_ID`.
4. Выполните перезагрузку Marzban через команду: `sudo marzban restart`
5. Ваш Telegram бот настроен и готов к работе.
